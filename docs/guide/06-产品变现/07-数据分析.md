# 数据分析

## 数据分析概述

数据分析是产品优化的基础。通过数据，我们可以了解用户行为、验证假设、优化产品，最终提高转化率和收入。

## 数据分析基础

### 常见指标

**用户获取**：访问量、新用户数、获客成本。

**用户激活**：注册率、激活率。

**用户留存**：次日留存、7日留存、30日留存。

**用户变现**：付费率、ARPU（每用户平均收入）。

**用户推荐**：NPS（净推荐值）、分享率。

### 用户漏斗

分析用户从访问到转化的各个阶段：

```
访问 → 注册 → 激活 → 留存 → 变现 → 推荐
```

识别漏斗中的流失环节，针对性优化。

### 同期群分析

将用户按获取时间分组，分析不同群组的表现。了解用户随时间的变化趋势。

## 数据收集

### 埋点设计

**事件埋点**：记录用户的关键行为。

**页面埋点**：记录用户访问的页面。

**属性埋点**：记录用户和事件的属性。

### 埋点示例

```javascript
// 点击事件
trackEvent('button_click', {
  button_name: 'signup',
  page: 'home',
});

// 页面浏览
trackPageView('/pricing');
```

### 数据采集工具

**Google Analytics**：网站分析。

**Mixpanel**：产品分析，事件追踪。

**Amplitude**：产品分析，用户行为。

**友盟/神策**：国内产品分析工具。

## 用户行为分析

### 访问路径分析

用户是如何在网站上流动的？哪些页面是入口？用户在哪些页面流失？

### 热力图

**点击热力图**：用户点击的位置分布。

**滚动热力图**：用户滚动到页面的什么位置。

**鼠标移动**：用户的注意力分布。

工具：Hotjar、Mousestats。

### 漏斗分析

用户完成目标的转化路径。识别转化率低的环节。

### 留存分析

用户是否会持续使用产品？不同渠道的用户留存差异？哪些功能提高留存？

## 产品分析

### 功能分析

**功能使用率**：每个功能的使用比例。

**功能粘性**：使用某个功能后，用户留存是否提高。

**功能路径**：用户使用功能的路径。

### A/B 测试

**测试设计**：确定测试变量、样本量、测试周期。

**测试执行**：随机分组，收集数据。

**结果分析**：统计显著性，结果解读。

### 改版分析

改版前后指标对比。用户对新功能的反馈。改版对核心指标的影响。

## 商业数据分析

### 收入分析

**总收入**：总收入趋势。

**收入来源**：不同渠道的收入贡献。

**客单价**：平均每单金额。

**复购率**：重复购买的比例。

### 成本分析

**获客成本（CAC）**：获取一个用户的成本。

**运营成本**：服务器、工具、人员等成本。

**边际成本**：每增加一个用户的成本。

### 盈利分析

**毛利率**：(收入 - 成本) / 收入。

**LTV/CAC**：生命周期价值与获客成本的比值。

**月度经常性收入（MRR）**：订阅收入的月度数据。

## 数据可视化

### 图表选择

**趋势变化**：折线图。

**对比分析**：柱状图。

**占比分析**：饼图、环形图。

**分布分析**：直方图、箱线图。

**关系分析**：散点图。

### 仪表盘

创建核心指标的仪表盘：实时监控关键指标。一眼了解业务状况。方便汇报和分享。

### 报表

定期生成数据分析报告：数据概览。关键发现。建议和行动项。

## 数据分析工具

### 通用工具

**Excel**：基础数据分析。

**Google Sheets**：在线协作分析。

**Python（Pandas）**：高级数据分析。

### 专业工具

**Tableau**：强大的可视化工具。

**Power BI**：微软的商业智能工具。

**Looker**：数据可视化和探索。

### SQL

使用 SQL 进行数据查询和分析。

```sql
-- 用户留存分析
WITH user_cohort AS (
  SELECT 
    user_id,
    DATE_TRUNC('month', first_login) as cohort_month
  FROM users
),
user_activity AS (
  SELECT
    user_id,
    DATE_TRUNC('month', login_date) as activity_month
  FROM logins
)
SELECT
  cohort_month,
  COUNT(DISTINCT user_id) as total_users,
  COUNT(DISTINCT CASE WHEN activity_month = DATE_ADD('month', 1, cohort_month) THEN user_id END) as month_1_retention
FROM user_cohort
LEFT JOIN user_activity USING (user_id)
GROUP BY cohort_month
```

## 数据驱动决策

### 决策流程

1. 提出假设。
2. 设计实验/分析。
3. 收集数据。
4. 分析结果。
5. 得出结论。
6. 做出决策。

### 避免的误区

**相关不等于因果**：数据分析发现的是相关性，需要进一步验证因果关系。

**样本偏差**：样本是否代表整体？

**确认偏见**：只关注支持自己假设的数据。

**虚荣指标**：关注真正有意义的指标。

### 数据与直觉

数据是决策的重要参考，但不是唯一参考。结合数据和直觉做出最佳决策。

## 隐私与合规

### 数据隐私

**用户同意**：收集数据前获得用户同意。

**数据脱敏**：敏感数据脱敏处理。

**数据安全**：保护数据不被泄露。

### 合规要求

**GDPR**：欧盟通用数据保护条例。

**网络安全法**：中国网络安全法相关要求。

**隐私政策**：发布隐私政策，告知用户数据使用方式。
