# 对话工程

## 对话工程概述

与 AI 对话是一门艺术，也是一门工程。掌握对话工程的技巧，可以显著提高与 AI 协作的效率和质量。

对话工程包括：需求表达技巧、对话结构设计、上下文管理、多轮对话策略等。

## 需求表达技巧

### 角色定义

在对话开始时定义 AI 的角色，可以让后续对话更加顺畅。例如：

```
你是一个经验丰富的全栈开发工程师，擅长使用 Vue.js 和 Node.js 开发高质量的 Web 应用。请用中文回答我的问题，代码要简洁、规范、有注释。
```

### 背景提供

提供足够的背景信息，帮助 AI 理解你的处境：

```
我正在开发一个个人博客项目，使用 Vue 3 + Vite 技术栈。我已经创建了基本的项目结构，现在需要实现用户认证功能。
```

### 期望明确

明确表达你的期望，包括代码风格、质量要求等：

```
请帮我编写代码，要求：
1. 代码使用 TypeScript
2. 遵循 ESLint 默认规范
3. 每个函数都要有 JSDoc 注释
4. 错误处理要完善
```

### 约束说明

说明各种约束条件：

```
不要使用第三方 UI 库，使用原生 HTML/CSS。确保在移动端也能正常显示。代码要兼容主流浏览器（Chrome、Safari、Edge）。
```

## 对话结构设计

### 单一职责

每个对话应该专注于一个明确的目标。不要在一个对话中要求太多不相关的功能。

**好的做法**：先完成登录功能，再完成注册功能，然后完成权限验证。

**不好的做法**：在一个对话中要求完成登录、注册、权限、用户管理等多个功能。

### 逐步深入

从简单到复杂，逐步深入。先生成基础框架，再添加具体功能。

### 结构化表达

使用结构化的方式表达需求：

```
功能：用户登录
输入：邮箱、密码
处理：
1. 验证邮箱格式
2. 验证密码长度
3. 查询数据库验证凭据
4. 生成 JWT Token
输出：Token 或错误信息
```

## 上下文管理

### 初始上下文

在开始一个新任务时，提供必要的上下文：项目类型和技术栈；已有的代码结构；相关的代码或文件；编码规范和风格要求。

### 上下文传递

当开始新对话时，简要回顾之前的上下文：

```
我正在开发一个 Vue 3 博客系统，之前已经完成了用户认证模块。现在需要实现文章管理功能。
```

### 上下文精简

保持对话简洁，去除不必要的信息。过长的上下文会影响 AI 的理解能力。

### 文件引用

对于复杂的项目，让 AI 直接读取文件：

```
请读取 src/user/auth.js 文件，然后帮我添加密码重置功能。
```

## 多轮对话策略

### 反馈明确

每次收到 AI 的输出后，给出明确的反馈：

**肯定反馈**："这段代码很好，继续下一个功能。"

**修正反馈**："这个函数的参数不对，应该改为 username，不是 userName。"

**否定反馈**："这个方案不符合需求，请重新考虑。"

### 追问技巧

当 AI 的回答不完整或不准确时，学会追问：

```
你的回答只处理了成功的场景，请补充错误处理的逻辑。

这个 API 的响应格式是什么样的？请给出完整的响应示例。

这段代码的性能可能有问题，请提供优化方案。
```

### 方向引导

当对话偏离主题时，引导 AI 回到正确的方向：

```
回到我们刚才的话题，我们需要先完成数据库设计。请继续。
```

## 高级技巧

### 示范引导

给 AI 提供示范，引导它按照你的方式工作：

```
之前我们是这样处理错误的：

try {
  await db.insert(data)
} catch (error) {
  logger.error('Database error:', error)
  throw new Error('保存失败，请稍后重试')
}

请按照同样的方式处理新的数据库操作。
```

### 限制设定

为 AI 设置限制，防止它生成不合适的代码：

```
请只使用我项目中的依赖库，不要引入新的库。

代码要保持简单，不要使用复杂的语法和高级特性。
```

### 对比分析

让 AI 分析不同方案的优劣：

```
请比较 Promise.all 和串行 await 两种方式处理多个异步操作的优劣，并给出使用场景建议。
```

### 代码审查

让 AI 审查代码，提供改进建议：

```
请审查以下代码，指出潜在的问题并提供改进建议：

[代码内容]
```

## 对话模板库

### 通用功能模板

建立常用的对话模板，提高效率：

```
【创建组件】
创建一个 [组件名称] 组件，功能：[功能描述]。
使用 [技术栈]，样式要求：[样式要求]。
组件 Props：[属性列表和类型]。
```

```
【创建 API】
创建 [API 名称] 接口。
路径：[HTTP 方法 + 路径]。
请求参数：[参数列表]。
返回格式：[响应格式]。
```

### 问题排查模板

建立问题排查的对话模板：

```
遇到了 [问题描述]。
错误信息：[错误日志]。
我尝试了 [已尝试的解决方案]。
请帮我分析问题原因并提供解决方案。
```

## 对话质量评估

### 评估维度

评估对话质量可以从以下维度：代码正确性，代码是否能正确运行。代码质量，代码是否简洁、规范、安全。沟通效率，是否一次对话就得到满意的结果。理解准确度，AI 是否准确理解了需求。

### 持续优化

记录每次对话的关键点和结果，总结经验和教训。持续优化对话方式，提高效率。
