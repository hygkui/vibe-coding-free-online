# 上下文管理

## 上下文管理的重要性

上下文是 AI 理解和生成代码的基础。良好的上下文管理可以让 AI 保持对项目的理解，避免重复解释，提高协作效率。

在 Vibe Coding 过程中，你需要管理多种上下文：当前对话的上下文、项目整体的上下文、技术栈和规范的上下文等。

## 上下文类型

### 当前对话上下文

当前对话中最近的交流内容。这是最直接的上下文，直接影响 AI 的即时响应。

### 项目上下文

关于整个项目的背景信息，包括：项目类型（Web 应用、小程序、CLI 工具等）。技术栈（前端框架、后端语言、数据库等）。项目结构（目录组织、主要模块等）。编码规范（代码风格、命名约定等）。

### 技术上下文

与当前任务相关的技术背景：API 接口文档。数据模型定义。已实现的类似功能。已知的问题和解决方案。

## 上下文管理策略

### 初始设定

在开始新项目时，设定完整的项目上下文：

```
这是一个使用 Vue 3 + Vite + TypeScript 开发的项目。
项目结构遵循 Vue 官方推荐的目录结构。
代码规范使用 ESLint 默认规则 + Prettier 格式化。
数据库使用 SQLite，ORM 使用 Prisma。
请先阅读 src 目录下的代码，了解项目结构后再开始开发。
```

### 渐进式提供

不需要一开始提供所有信息，而是根据需要渐进式提供。当需要某个功能时，提供相关的上下文。

### 上下文压缩

当上下文变长时，可以请求 AI 压缩上下文：

```
我们已经讨论了很多内容，请总结一下目前完成的功能和下一步要做的事情。
```

### 上下文切换

当需要处理不同模块时，切换上下文：

```
好的，用户认证功能已经完成。现在我们开始开发文章管理功能。请阅读 src/article 目录了解现有的代码结构。
```

## 实际技巧

### 使用系统提示

在对话开始时设置系统提示，定义 AI 的行为和约束：

```
你是一个专业的 Vue.js 开发专家。回答问题时：
1. 优先使用 Composition API
2. 代码使用 TypeScript
3. 每个函数都要有类型定义
4. 保持代码简洁，避免过度设计
```

### 记录关键信息

在对话过程中记录关键信息，方便后续参考：

```
【项目笔记】
- 认证使用 JWT，存储在 localStorage
- API 基地址：http://localhost:3000
- 错误处理统一在 api.js 中处理
- 使用的组件库：Element Plus
```

### 文件引用

让 AI 直接读取文件，而不是在对话中粘贴大段代码：

```
请读取 src/utils/api.ts 文件，然后帮我添加一个新的 API 函数。
```

### 项目说明文件

创建一个项目说明文件，记录项目的基本信息和规范：

```markdown
# 项目说明

## 技术栈
- 前端：Vue 3 + TypeScript + Vite
- 后端：Node.js + Express
- 数据库：SQLite + Prisma

## 编码规范
- 使用 ESLint + Prettier
- 组件使用 Composition API
- API 使用 RESTful 风格
- Git 提交信息使用 Conventional Commits

## 项目结构
- src/api: API 接口定义
- src/components: 可复用组件
- src/views: 页面视图
- src/stores: 状态管理
- src/utils: 工具函数
```

## 多轮对话管理

### 对话开始

开始新对话时，提供必要的背景：

```
我正在开发一个 Vue 3 项目，使用 TypeScript。
项目是一个博客系统，已经完成了用户认证模块。
现在需要实现文章管理功能。
```

### 对话进行中

保持对话焦点，避免跳跃：

**保持单一主题**：一个对话专注于一个功能模块。**及时反馈**：告诉 AI 回答是否满意。**明确指示**：告诉 AI 接下来要做什么。

### 对话结束

对话结束时，总结关键信息：

```
好的，这部分功能已经完成。总结一下我们实现的内容：
1. 用户登录功能
2. JWT Token 验证中间件
3. 密码加密存储

下一步需要实现文章管理功能。
```

## 常见问题与解决

### 上下文丢失

当开启新对话时，之前的上下文会丢失。解决方法：在开始新对话时，简要说明之前的进展。维护项目笔记，记录重要的上下文。

### 上下文过长

当上下文太长时，AI 可能无法处理。解决方法：请求 AI 压缩或总结上下文。删除不相关的信息。将大项目拆分成小模块。

### 上下文混乱

当不同任务混在一起时，上下文会混乱。解决方法：每个对话专注于一个任务。清晰地标记不同的任务和模块。

## 工具辅助

### 笔记工具

使用笔记工具记录项目上下文：Notion、Obsidian、飞书文档等。

### 代码文档

在代码中添加文档，让 AI 可以通过阅读代码理解项目：JSDoc 注释、README 文件、架构文档等。

### 对话历史

保留重要的对话历史：记录成功的对话模式。保存常用的提示词模板。
