# 全栈应用

## 全栈应用开发概述

全栈应用是指同时包含前端界面和后端服务的完整应用。开发全栈应用需要处理用户界面、业务逻辑、数据存储等多个层面，是提升编程能力的绝佳途径。

在 Vibe Coding 时代，全栈开发的门槛大大降低。通过 AI 辅助，你可以一个人完成原本需要一个团队才能完成的工作。

## 技术栈选择

### 前端技术栈

前端技术选择需要考虑：团队技术背景、项目复杂度、维护成本。

对于 Vibe Coding 学习者，推荐以下技术栈：

**轻量级方案**：纯 HTML/CSS/JavaScript，学习曲线最平缓，适合简单的全栈应用。

**现代框架方案**：Vue 3 或 React，配合 Vite 构建工具。生态丰富，开发效率高。

**全栈框架方案**：Next.js（React）或 Nuxt（Vue），内置后端功能，简化全栈开发。

### 后端技术栈

后端技术选择需要考虑：性能需求、扩展性、团队经验。

**Node.js**：JavaScript 一致性好，学习成本低，生态丰富。适合大多数应用场景。

**Python**：语法简洁，数据处理能力强，适合涉及数据分析的应用。

**Go**：性能高，部署简单，适合对性能有要求的应用。

### 数据库选择

**关系型数据库**：MySQL、PostgreSQL，适合结构化数据和复杂查询。

**文档数据库**：MongoDB，灵活的模式，适合快速迭代。

**轻量级数据库**：SQLite，无需单独服务器，适合小型应用。

**内存数据库**：Redis，高速缓存、会话存储、消息队列。

## 项目结构设计

### 前端项目结构

```
project/
├── src/
│   ├── components/    # 可复用组件
│   ├── views/         # 页面视图
│   ├── router/        # 路由配置
│   ├── stores/        # 状态管理
│   ├── api/           # API 调用
│   ├── utils/         # 工具函数
│   └── styles/        # 样式文件
├── public/            # 静态资源
└── package.json
```

### 后端项目结构

```
server/
├── src/
│   ├── controllers/   # 控制器，处理请求
│   ├── models/        # 数据模型
│   ├── routes/        # 路由定义
│   ├── middlewares/   # 中间件
│   ├── services/      # 业务逻辑
│   ├── utils/         # 工具函数
│   └── config/        # 配置文件
├── uploads/           # 上传文件
├── package.json
└── .env               # 环境变量
```

## 用户认证与授权

### JWT 认证

JWT（JSON Web Token）是常用的认证方案。流程如下：

用户登录成功后，服务端生成 JWT Token 返回给客户端。客户端在后续请求中携带 Token。服务端验证 Token 的有效性，确认用户身份。

### 权限控制

基于角色的权限控制（RBAC）是常见的授权方案。定义不同的角色（如普通用户、管理员），为角色分配权限。用户被分配到某个角色，获得相应的权限。

### 开发示例

用户认证系统：

```
请帮我实现一个用户认证系统，包含以下功能：
1. 用户注册，支持邮箱和密码
2. 用户登录，返回 JWT Token
3. JWT Token 刷新机制
4. 中间件验证 Token 和权限
5. 管理员可以管理用户
6. 密码加密存储
```

## API 开发

### RESTful API 设计

遵循 RESTful 原则设计 API：使用 HTTP 方法表达操作（GET 获取、POST 创建、PUT 更新、DELETE 删除）。使用资源路径表达对象。返回标准的状态码和响应格式。

### API 文档

为 API 生成文档，推荐使用：Swagger/OpenAPI，自动生成交互式文档。Postman 集合，方便测试和分享。

### 开发示例

用户管理 API：

```
请帮我设计用户管理的 RESTful API：
1. GET /users - 获取用户列表，支持分页和筛选
2. GET /users/:id - 获取单个用户详情
3. POST /users - 创建新用户
4. PUT /users/:id - 更新用户信息
5. DELETE /users/:id - 删除用户
6. POST /users/:id/role - 修改用户角色
```

## 数据库设计

### 实体关系设计

设计数据库前，先梳理实体和它们之间的关系。一对一、一对多、多对多。

### 数据模型

为每个实体设计数据模型：字段名称和类型、约束条件（唯一、非空、默认值）、索引设计。

### 开发示例

博客系统数据库：

```
请帮我设计一个博客系统的数据库：
1. 用户（id、用户名、邮箱、密码、头像、角色、创建时间）
2. 文章（id、标题、内容、摘要、作者、分类、标签、状态、创建时间、更新时间）
3. 分类（id、名称、slug）
4. 标签（id、名称、slug）
5. 评论（id、内容、作者、文章、创建时间）
```

## 前端与后端集成

### API 调用封装

封装统一的 API 调用模块，处理请求拦截、响应拦截、错误处理。

### 状态管理

选择合适的状态管理方案：小项目可以用 Vuex/Redux；简单场景可以用 Context API/Pinia；复杂场景可能需要更强大的方案。

### 开发示例

前后端集成：

```
前后端分离项目中，请帮我实现以下集成：
1. 使用 Axios 封装 API 请求，统一处理 Token 和错误
2. 实现请求拦截器，自动添加认证 Token
3. 实现响应拦截器，统一处理错误和 Token 过期
4. 使用 Pinia 管理用户状态和认证状态
5. 实现登录页面，调用登录接口并保存 Token
6. 实现路由守卫，未登录用户跳转到登录页
```

## 全栈应用部署

### 前端部署

前端静态资源可以部署到：Vercel，自动适配 Next.js 等框架。Netlify，丰富的功能和良好的体验。GitHub Pages，简单静态网站的首选。

### 后端部署

后端服务可以部署到：云服务器（如阿里云、腾讯云），完全控制但需要运维。容器化部署，使用 Docker 和 K8s。Serverless，函数即服务，按调用付费。

### 数据库部署

数据库部署选项：云数据库服务，如阿里云 RDS、AWS RDS。自行部署，需要更多的运维能力。

### 域名和 HTTPS

申请域名并配置 SSL 证书。可以使用 Let's Encrypt 免费证书。

## 全栈项目实战：社区论坛

### 项目需求

创建一个功能完整的社区论坛系统：

用户模块：注册、登录、个人中心、关注用户。文章模块：发表文章、编辑删除、收藏点赞。评论模块：发表评论、回复评论、删除评论。管理模块：内容审核、用户管理、系统设置。

### 技术选型

前端：Vue 3 + Vite + Pinia + Vue Router。后端：Node.js + Express + MongoDB。部署：前后端分别部署，Nginx 反向代理。

### 开发计划

第一阶段，完成用户认证和基本框架。第二阶段，完成文章和评论功能。第三阶段，完成互动功能（收藏、点赞、关注）。第四阶段，完成管理和后台功能。第五阶段，测试、优化和部署。
